<!DOCTYPE html>
<html>
<head>
  <title>Noises</title>
  <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">
  <link rel="stylesheet" href="reset.css">
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag :defaults %>
  <%= mp3_player_headers %>
  <%= csrf_meta_tags %>
  <!-- favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <!-- fonts -->
  <link href='https://fonts.googleapis.com/css?family=Timmana|Roboto+Mono|Rajdhani|VT323|Fira+Mono' rel='stylesheet' type='text/css'>

</head>
<body>
  <!-- flash notices -->
	<% if notice %>
	  <p class="alert alert-success"><%= notice %></p>
	<% end %>
	<% if alert %>
	  <p class="alert alert-danger"><%= alert %></p>
  <% end %>

  <!-- user navigation bar -->
  <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>

  <p class="navbar-text pull-right">
    <!-- display menu link on device -->
  <div class="navbar navbar-default">
    <nav class='nav navbar-nav'>
      <a href="#" id="menu-icon"></a>
        <ul>
          <% if user_signed_in? %>
            <li><b><%= link_to 'Upload', new_user_mix_path(current_user.id), :class => 'navbar-link' %></b></li>
          <% end %>
          <li><%= link_to 'Noises!', mixes_all_path, :class => 'navbar-link' %></li>
          <li><%= link_to 'Users', users_path, :class => 'navbar-link' %></li> 
          <li><%= link_to 'Contact Jill', new_contact_path, :class => 'navbar-link' %></li> 

          <% if user_signed_in? %>
          <!-- count unread notifications -->
            <% count  = 0 %>
            <% current_user.notifications.each do |notification| %>
              <% if notification.state == 0 %>
                <% count+= 1 %>
              <% end %>
            <% end %>
            <li><%= link_to 'Notifications ' +  (count if count != 0).to_s, user_notifications_path(current_user), :class => 'navbar-link' %></li>
            <span class="user-info">You are logged in as <strong><%= current_user.name %></strong>.</span>
            <li><%= link_to 'Edit profile', edit_user_registration_path, :class => 'navbar-link' %></li>
            <li><%= link_to "logout", destroy_user_session_path, method: :delete, :class => 'navbar-link' %></li>    
            <% else %>
            <li><%= link_to "Signup", new_user_registration_path, :class => 'navbar-link' %></li>  
            <li><%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %></li>
          <% end %>
        </ul>
      <br>
    </nav>
  </div>
  <div class='container'>
  <%= yield %>
  </div>
</body>
</html>
